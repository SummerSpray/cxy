{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      id: null,\n      userName: null,\n      userRole: null,\n      // 用户角色\n      isLoggedIn: false,\n      // 登录状态\n      loginError: '',\n      // 用于显示错误信息\n      teamId: null,\n      // 用户所属团队 ID\n      villageId: null // 村庄ID\n    };\n  },\n  methods: {\n    // 跳转到用户管理页面\n    navigateToUserManagement() {\n      this.$router.push('/admin/users');\n    },\n    // 跳转到内容审核页面\n    navigateToContentReview() {\n      this.$router.push('/admin/review');\n    },\n    // 跳转到村庄管理页面\n    navigateToVillageManagementPage() {\n      this.$router.push('/admin/villages');\n    },\n    // 跳转到技术团队管理页面\n    navigateToTechTeamManagementPage() {\n      this.$router.push('/admin/techteams');\n    },\n    // 跳转到系统设置页面\n    navigateToSystemSettings() {\n      this.$router.push('/admin/settings');\n    },\n    // 跳转到团队页面\n    navigateToTechTasks() {\n      if (this.teamId) {\n        this.$router.push(`/team/${this.teamId}/renew`);\n      } else {\n        alert('您尚未绑定团队，请联系管理员。');\n      }\n    },\n    // 跳转到村庄管理页面\n    navigateToVillageManagement() {\n      this.$router.push(`/village/management/${this.villageId}`);\n    },\n    // 跳转到个人资料页面\n    navigateToCustomerProfile() {\n      this.$router.push(`/user/profile/${this.id}`);\n    },\n    // 跳转到产品页面\n    navigateToProductList() {\n      this.$router.push('/product');\n    },\n    // 跳转到登录页面\n    navigateToLogin() {\n      this.$router.push('/login');\n    },\n    // 获取用户登录状态和角色\n    checkLoginStatus() {\n      const userData = localStorage.getItem('userData');\n      if (userData) {\n        const parsedData = JSON.parse(userData);\n        console.log('Parsed User Data:', parsedData); // 打印解析后的数据\n        this.isLoggedIn = true;\n        this.userName = parsedData.username;\n        this.id = parsedData.id;\n        this.userRole = parsedData.role; // 获取用户角色\n        this.teamId = parsedData.team_id; // 获取用户所属团队 ID\n        this.villageId = parsedData.village_id; // 获取村庄ID\n      } else {\n        this.isLoggedIn = false;\n      }\n    },\n    // 退出登录\n    handleLogout() {\n      localStorage.removeItem('userData'); // 清除 localStorage 中的用户数据\n      this.userName = null;\n      this.isLoggedIn = false; // 更新登录状态\n      this.userRole = null; // 清除角色信息\n      this.teamId = null; // 清除团队 ID\n      this.villageId = null; // 清除村庄ID\n      this.$router.push('/login'); // 跳转到登录页\n    }\n  },\n  mounted() {\n    this.checkLoginStatus();\n    console.log('Component Loaded:', this.teamId, this.villageId); // 添加调试信息\n  }\n};","map":{"version":3,"names":["axios","data","id","userName","userRole","isLoggedIn","loginError","teamId","villageId","methods","navigateToUserManagement","$router","push","navigateToContentReview","navigateToVillageManagementPage","navigateToTechTeamManagementPage","navigateToSystemSettings","navigateToTechTasks","alert","navigateToVillageManagement","navigateToCustomerProfile","navigateToProductList","navigateToLogin","checkLoginStatus","userData","localStorage","getItem","parsedData","JSON","parse","console","log","username","role","team_id","village_id","handleLogout","removeItem","mounted"],"sources":["/home/toma/桌面/projects/RuralWebApp/frontend/src/components/PersonCenter.vue"],"sourcesContent":["<template>\r\n  <div class=\"system-admin\">\r\n    <div v-if=\"userRole\">\r\n      <h2>个人中心</h2>\r\n      <h3 style=\"text-align: center\">当前用户：{{ userName }}</h3>\r\n    </div>\r\n\r\n    <!-- 用户类别判断 -->\r\n     <div v-if=\"userRole === 'admin'\">\r\n      <h3>管理员功能</h3>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToCustomerProfile\" class=\"admin-btn\">查看个人资料</button>\r\n      </div>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToUserManagement\" class=\"admin-btn\">管理用户</button>\r\n      </div>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToVillageManagementPage\" class=\"admin-btn\">管理村庄</button>\r\n      </div>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToTechTeamManagementPage\" class=\"admin-btn\">管理技术团队</button>\r\n      </div>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToSystemSettings\" class=\"admin-btn\">系统设置</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"userRole === 'tech'\">\r\n      <h3>技术团队功能</h3>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToCustomerProfile\" class=\"admin-btn\">查看个人资料</button>\r\n      </div>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToTechTasks\" class=\"admin-btn\">编辑团队主页</button>\r\n      </div>\r\n      \r\n    </div>\r\n\r\n    <div v-if=\"userRole === 'villageAdmin'\">\r\n      <h3>村庄管理员功能</h3>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToCustomerProfile\" class=\"admin-btn\">查看个人资料</button>\r\n      </div>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToVillageManagement\" class=\"admin-btn\">管理村庄</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"userRole === 'user'\">\r\n      <h3>客户功能</h3>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToCustomerProfile\" class=\"admin-btn\">查看个人资料</button>\r\n      </div>\r\n      <div class=\"admin-section\">\r\n        <button @click=\"navigateToProductList\" class=\"admin-btn\">查看产品</button>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- 未登录时提示 -->\r\n    <div v-if=\"!isLoggedIn\" style=\"display: flex; justify-content: center; align-items: center;\">\r\n      <div style=\"text-align: center;\">\r\n        <p>您尚未登录，请先登录。</p>\r\n        <button @click=\"navigateToLogin\" class=\"admin-btn\">去登录</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 登录状态下显示退出按钮 -->\r\n    <div v-if=\"isLoggedIn\">\r\n      <div style=\"display: flex; justify-content: center; align-items: center;\">\r\n        <button @click=\"handleLogout\" class=\"admin-btn\" style=\"align-items: center\">退出登录</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      id: null,\r\n      userName: null,\r\n      userRole: null, // 用户角色\r\n      isLoggedIn: false, // 登录状态\r\n      loginError: '', // 用于显示错误信息\r\n      teamId: null, // 用户所属团队 ID\r\n      villageId: null, // 村庄ID\r\n    };\r\n  },\r\n  methods: {\r\n    // 跳转到用户管理页面\r\n    navigateToUserManagement() {\r\n      this.$router.push('/admin/users');\r\n    },\r\n    // 跳转到内容审核页面\r\n    navigateToContentReview() {\r\n      this.$router.push('/admin/review');\r\n    },\r\n    // 跳转到村庄管理页面\r\n    navigateToVillageManagementPage() {\r\n      this.$router.push('/admin/villages');\r\n    },\r\n    // 跳转到技术团队管理页面\r\n    navigateToTechTeamManagementPage() {\r\n      this.$router.push('/admin/techteams');\r\n    },\r\n    // 跳转到系统设置页面\r\n    navigateToSystemSettings() {\r\n      this.$router.push('/admin/settings');\r\n    },\r\n    // 跳转到团队页面\r\n    navigateToTechTasks() {\r\n      if (this.teamId) {\r\n        this.$router.push(`/team/${this.teamId}/renew`);\r\n      } else {\r\n        alert('您尚未绑定团队，请联系管理员。');\r\n      }\r\n    },\r\n    // 跳转到村庄管理页面\r\n    navigateToVillageManagement() {\r\n      this.$router.push(`/village/management/${this.villageId}`);\r\n    },\r\n    // 跳转到个人资料页面\r\n    navigateToCustomerProfile() {\r\n      this.$router.push(`/user/profile/${this.id}`);\r\n    },\r\n    // 跳转到产品页面\r\n    navigateToProductList() {\r\n      this.$router.push('/product');\r\n    },\r\n    // 跳转到登录页面\r\n    navigateToLogin() {\r\n      this.$router.push('/login');\r\n    },\r\n\r\n    // 获取用户登录状态和角色\r\n    checkLoginStatus() {\r\n      const userData = localStorage.getItem('userData');\r\n      if (userData) {\r\n        const parsedData = JSON.parse(userData);\r\n        console.log('Parsed User Data:', parsedData); // 打印解析后的数据\r\n        this.isLoggedIn = true;\r\n        this.userName = parsedData.username;\r\n        this.id = parsedData.id;\r\n        this.userRole = parsedData.role; // 获取用户角色\r\n        this.teamId = parsedData.team_id; // 获取用户所属团队 ID\r\n        this.villageId = parsedData.village_id; // 获取村庄ID\r\n      } else {\r\n        this.isLoggedIn = false;\r\n      }\r\n    },\r\n    // 退出登录\r\n    handleLogout() {\r\n      localStorage.removeItem('userData'); // 清除 localStorage 中的用户数据\r\n      this.userName = null;\r\n      this.isLoggedIn = false; // 更新登录状态\r\n      this.userRole = null; // 清除角色信息\r\n      this.teamId = null; // 清除团队 ID\r\n      this.villageId = null; // 清除村庄ID\r\n      this.$router.push('/login'); // 跳转到登录页\r\n    },\r\n   \r\n    \r\n  },\r\n  mounted() {\r\n    this.checkLoginStatus();\r\n    console.log('Component Loaded:', this.teamId, this.villageId); // 添加调试信息\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.system-admin {\r\n  padding: 30px;\r\n  background-color: #f9f9f9;\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\nh2 {\r\n  font-size: 28px;\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n  color: #333;\r\n}\r\n\r\n.admin-section {\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.admin-section button {\r\n  padding: 10px 20px;\r\n  font-size: 16px;\r\n  background-color: #007BFF;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.admin-section button:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.admin-btn {\r\n  padding: 10px 20px;\r\n  font-size: 16px;\r\n  background-color: #007BFF;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n  text-align: center;\r\n}\r\n\r\n.admin-btn:hover {\r\n  background-color: #0056b3;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}