{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"village-image\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  class: \"village-committee\"\n};\nconst _hoisted_5 = {\n  class: \"committee-overview\"\n};\nconst _hoisted_6 = {\n  class: \"committee-members\"\n};\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = {\n  key: 1\n};\nconst _hoisted_9 = {\n  class: \"committee-achievements\"\n};\nconst _hoisted_10 = {\n  class: \"committee-tracking\"\n};\nconst _hoisted_11 = {\n  class: \"village-status\"\n};\nconst _hoisted_12 = {\n  class: \"status-overview\"\n};\nconst _hoisted_13 = {\n  class: \"status-map\"\n};\nconst _hoisted_14 = {\n  class: \"status-structure\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_bm_marker = _resolveComponent(\"bm-marker\");\n  const _component_baidu_map = _resolveComponent(\"baidu-map\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h2\", null, _toDisplayString($data.village.name) + \"--村庄详情 \", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"img\", {\n    src: $options.villageImage,\n    alt: \"村庄图片\"\n  }, null, 8 /* PROPS */, _hoisted_3)]), _createElementVNode(\"p\", null, _toDisplayString($data.village.description), 1 /* TEXT */), _createCommentVNode(\" 村委介绍 \"), _createElementVNode(\"section\", _hoisted_4, [_cache[5] || (_cache[5] = _createElementVNode(\"h3\", null, \"村委介绍\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_cache[1] || (_cache[1] = _createElementVNode(\"h4\", null, \"总况介绍\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($data.village.committeeOverview), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_6, [_cache[2] || (_cache[2] = _createElementVNode(\"h4\", null, \"人员介绍\", -1 /* HOISTED */)), $data.village.committeeMembers.length > 0 ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.village.committeeMembers, member => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: member.id\n    }, _toDisplayString(member.name) + \" - \" + _toDisplayString(member.role), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"暂无村委人员信息\"))]), _createElementVNode(\"div\", _hoisted_9, [_cache[3] || (_cache[3] = _createElementVNode(\"h4\", null, \"业绩管理\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($data.village.committeeAchievements), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_cache[4] || (_cache[4] = _createElementVNode(\"h4\", null, \"工作跟踪\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($data.village.committeeTracking), 1 /* TEXT */)])]), _createCommentVNode(\" 村况介绍 \"), _createElementVNode(\"section\", _hoisted_11, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", null, \"村况介绍\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_12, [_cache[6] || (_cache[6] = _createElementVNode(\"h4\", null, \"总况介绍\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($data.village.statusOverview), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_13, [_cache[7] || (_cache[7] = _createElementVNode(\"h4\", null, \"总地图\", -1 /* HOISTED */)), $data.village.latitude && $data.village.longitude ? (_openBlock(), _createBlock(_component_baidu_map, {\n    key: 0,\n    class: \"small-map\",\n    center: {\n      lng: $data.village.longitude,\n      lat: $data.village.latitude\n    },\n    zoom: 15\n  }, {\n    default: _withCtx(() => [_createVNode(_component_bm_marker, {\n      position: {\n        lng: $data.village.longitude,\n        lat: $data.village.latitude\n      }\n    }, null, 8 /* PROPS */, [\"position\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"center\"])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_14, [_cache[8] || (_cache[8] = _createElementVNode(\"h4\", null, \"结构管理\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, _toDisplayString($data.village.statusStructure), 1 /* TEXT */)])]), _createCommentVNode(\" 页面底部按钮 \"), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.goToProductInfo && $options.goToProductInfo(...args))\n  }, \"该村产品\")]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","$data","village","name","_hoisted_2","src","$options","villageImage","alt","_hoisted_3","description","_createCommentVNode","_hoisted_4","_hoisted_5","committeeOverview","_hoisted_6","committeeMembers","length","_hoisted_7","_Fragment","_renderList","member","id","role","_hoisted_8","_hoisted_9","committeeAchievements","_hoisted_10","committeeTracking","_hoisted_11","_hoisted_12","statusOverview","_hoisted_13","latitude","longitude","_createBlock","_component_baidu_map","center","lng","lat","zoom","default","_withCtx","_createVNode","_component_bm_marker","position","_","_hoisted_14","statusStructure","onClick","_cache","args","goToProductInfo"],"sources":["/home/toma/桌面/projects/RuralWebApp/frontend/src/views/VillageDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2>{{ village.name }}--村庄详情 </h2>\r\n    <div class=\"village-image\">\r\n      <img :src=\"villageImage\" alt=\"村庄图片\" />\r\n    </div>\r\n    <p>{{ village.description }}</p>\r\n\r\n    <!-- 村委介绍 -->\r\n    <section class=\"village-committee\">\r\n      <h3>村委介绍</h3>\r\n      <div class=\"committee-overview\">\r\n        <h4>总况介绍</h4>\r\n        <p>{{ village.committeeOverview }}</p>\r\n      </div>\r\n      <div class=\"committee-members\">\r\n        <h4>人员介绍</h4>\r\n        <ul v-if=\"village.committeeMembers.length > 0\">\r\n          <li v-for=\"member in village.committeeMembers\" :key=\"member.id\">\r\n            {{ member.name }} - {{ member.role }}\r\n          </li>\r\n        </ul>\r\n        <p v-else>暂无村委人员信息</p>\r\n      </div>\r\n      <div class=\"committee-achievements\">\r\n        <h4>业绩管理</h4>\r\n        <p>{{ village.committeeAchievements }}</p>\r\n      </div>\r\n      <div class=\"committee-tracking\">\r\n        <h4>工作跟踪</h4>\r\n        <p>{{ village.committeeTracking }}</p>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- 村况介绍 -->\r\n    <section class=\"village-status\">\r\n      <h3>村况介绍</h3>\r\n      <div class=\"status-overview\">\r\n        <h4>总况介绍</h4>\r\n        <p>{{ village.statusOverview }}</p>\r\n      </div>\r\n      <div class=\"status-map\">\r\n        <h4>总地图</h4>\r\n        <baidu-map v-if=\"village.latitude && village.longitude\" class=\"small-map\" :center=\"{lng: village.longitude, lat: village.latitude}\" :zoom=\"15\">\r\n          <bm-marker :position=\"{lng: village.longitude, lat: village.latitude}\"></bm-marker>\r\n        </baidu-map>\r\n      </div>\r\n      <div class=\"status-structure\">\r\n        <h4>结构管理</h4>\r\n        <p>{{ village.statusStructure }}</p>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- 页面底部按钮 -->\r\n    <button @click=\"goToProductInfo\">该村产品</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { BaiduMap, BmMarker } from 'vue-baidu-map-3x';\r\n\r\nexport default {\r\n  components: {\r\n    BaiduMap,\r\n    BmMarker\r\n  },\r\n  data() {\r\n    return {\r\n      village: {\r\n        name: '',\r\n        description: '',\r\n        image: '',  // 添加图片字段\r\n        committeeOverview: '',  // 村委总况介绍\r\n        committeeMembers: [],  // 村委人员介绍\r\n        committeeAchievements: '',  // 村委业绩管理\r\n        committeeTracking: '',  // 村委工作跟踪\r\n        statusOverview: '',  // 村况总况介绍\r\n        statusMap: '',  // 村况总地图\r\n        statusStructure: '',  // 村况结构管理\r\n        latitude: 0,  // 经度\r\n        longitude: 0  // 纬度\r\n      },\r\n    };\r\n  },\r\n computed: {\r\n  villageImage() {\r\n    try {\r\n      if (this.village.image) {\r\n        return require(`@/assets/${this.village.image}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading village image:', error);\r\n    }\r\n    return require('@/assets/villages/default.jpg');\r\n  }\r\n},\r\n  created() {\r\n    const id = this.$route.params.id;  // 获取路由参数 id\r\n    this.fetchVillage(id);\r\n  },\r\n  methods: {\r\n    async fetchVillage(id) {\r\n      try {\r\n        // 获取村庄基本信息\r\n        const villageResponse = await fetch(`http://localhost:5000/api/village/${id}`);\r\n        const villageData = await villageResponse.json();\r\n\r\n        // 获取村委信息\r\n        const committeeResponse = await fetch(`http://localhost:5000/api/village_committee/${id}`);\r\n        const committeeData = await committeeResponse.json();\r\n\r\n        // 获取村况信息\r\n        const statusResponse = await fetch(`http://localhost:5000/api/village_status/${id}`);\r\n        const statusData = await statusResponse.json();\r\n\r\n        // 获取地理位置信息\r\n        const locationResponse = await fetch(`http://localhost:5000/api/village_location/${id}`);\r\n        const locationData = await locationResponse.json();\r\n\r\n        this.village = {\r\n          name: villageData.name,\r\n          description: villageData.description,\r\n          image: villageData.image,  // 添加图片字段\r\n          committeeOverview: committeeData.committee_overview,\r\n          committeeMembers: committeeData.committeeMembers || [],  // 确保 committeeMembers 是一个数组\r\n          committeeAchievements: committeeData.committee_achievements,\r\n          committeeTracking: committeeData.committee_tracking,\r\n          statusOverview: statusData.status_overview,\r\n          statusMap: statusData.status_map,\r\n          statusStructure: statusData.status_structure,\r\n          latitude: locationData.latitude,\r\n          longitude: locationData.longitude,\r\n        };\r\n      } catch (error) {\r\n        console.error('Error fetching village data:', error);\r\n      }\r\n    },\r\n    goToProductInfo() {\r\n      const villageId = this.$route.params.id;\r\n      this.$router.push({ name: 'ProductInfo', params: { id: villageId } });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbody {\r\n  font-family: Arial, sans-serif;\r\n  color: #333;\r\n  background-color: #f0f0f0;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\nh2 {\r\n  font-size: 32px;\r\n  color: #2c3e50;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n\r\nsection {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  margin-bottom: 30px;\r\n  border: 1px solid #e0e0e0;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nh3 {\r\n  margin-top: 0;\r\n  margin-bottom: 15px;\r\n  color: #333;\r\n  font-size: 24px;\r\n  text-align: center;\r\n}\r\n\r\nh4 {\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n  color: #555;\r\n  font-size: 18px;\r\n}\r\n\r\nul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin-bottom: 15px;\r\n}\r\n\r\nli {\r\n  margin-bottom: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\np {\r\n  margin-bottom: 15px;\r\n  font-size: 16px;\r\n  line-height: 1.5;\r\n  color: #555;\r\n}\r\n\r\n.small-map {\r\n  width: 100%;\r\n  height: 300px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  margin-top: 15px;\r\n}\r\n\r\n.village-committee,\r\n.village-status {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.committee-overview,\r\n.committee-members,\r\n.committee-achievements,\r\n.committee-tracking,\r\n.status-overview,\r\n.status-map,\r\n.status-structure {\r\n  background-color: #f9f9f9;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  border: 1px solid #e0e0e0;\r\n}\r\n\r\n.village-image {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  \r\n}\r\n\r\n.village-image img {\r\n  max-width: 100%;\r\n  height: auto;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  width: 600px;\r\n}\r\n\r\nbutton {\r\n  margin-top: 20px;\r\n  padding: 10px 20px;\r\n  font-size: 16px;\r\n  color: #fff;\r\n  background-color: #2c3e50;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #34495e;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EAEfA,KAAK,EAAC;AAAe;mBAH9B;;EASaA,KAAK,EAAC;AAAmB;;EAE3BA,KAAK,EAAC;AAAoB;;EAI1BA,KAAK,EAAC;AAAmB;;EAfpCC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;EAwBWD,KAAK,EAAC;AAAwB;;EAI9BA,KAAK,EAAC;AAAoB;;EAOxBA,KAAK,EAAC;AAAgB;;EAExBA,KAAK,EAAC;AAAiB;;EAIvBA,KAAK,EAAC;AAAY;;EAMlBA,KAAK,EAAC;AAAkB;;;;uBA9CjCE,mBAAA,CAsDM,OAtDNC,UAsDM,GArDJC,mBAAA,CAAkC,YAAAC,gBAAA,CAA3BC,KAAA,CAAAC,OAAO,CAACC,IAAI,IAAG,SAAO,iBAC7BJ,mBAAA,CAEM,OAFNK,UAEM,GADJL,mBAAA,CAAsC;IAAhCM,GAAG,EAAEC,QAAA,CAAAC,YAAY;IAAEC,GAAG,EAAC;0BAJnCC,UAAA,E,GAMIV,mBAAA,CAAgC,WAAAC,gBAAA,CAA1BC,KAAA,CAAAC,OAAO,CAACQ,WAAW,kBAEzBC,mBAAA,UAAa,EACbZ,mBAAA,CAuBU,WAvBVa,UAuBU,G,0BAtBRb,mBAAA,CAAa,YAAT,MAAI,sBACRA,mBAAA,CAGM,OAHNc,UAGM,G,0BAFJd,mBAAA,CAAa,YAAT,MAAI,sBACRA,mBAAA,CAAsC,WAAAC,gBAAA,CAAhCC,KAAA,CAAAC,OAAO,CAACY,iBAAiB,iB,GAEjCf,mBAAA,CAQM,OARNgB,UAQM,G,0BAPJhB,mBAAA,CAAa,YAAT,MAAI,sBACEE,KAAA,CAAAC,OAAO,CAACc,gBAAgB,CAACC,MAAM,Q,cAAzCpB,mBAAA,CAIK,MArBbqB,UAAA,I,kBAkBUrB,mBAAA,CAEKsB,SAAA,QApBfC,WAAA,CAkB+BnB,KAAA,CAAAC,OAAO,CAACc,gBAAgB,EAAlCK,MAAM;yBAAjBxB,mBAAA,CAEK;MAF2CD,GAAG,EAAEyB,MAAM,CAACC;wBACvDD,MAAM,CAAClB,IAAI,IAAG,KAAG,GAAAH,gBAAA,CAAGqB,MAAM,CAACE,IAAI;qDAGtC1B,mBAAA,CAAsB,KAtB9B2B,UAAA,EAsBkB,UAAQ,G,GAEpBzB,mBAAA,CAGM,OAHN0B,UAGM,G,0BAFJ1B,mBAAA,CAAa,YAAT,MAAI,sBACRA,mBAAA,CAA0C,WAAAC,gBAAA,CAApCC,KAAA,CAAAC,OAAO,CAACwB,qBAAqB,iB,GAErC3B,mBAAA,CAGM,OAHN4B,WAGM,G,0BAFJ5B,mBAAA,CAAa,YAAT,MAAI,sBACRA,mBAAA,CAAsC,WAAAC,gBAAA,CAAhCC,KAAA,CAAAC,OAAO,CAAC0B,iBAAiB,iB,KAInCjB,mBAAA,UAAa,EACbZ,mBAAA,CAgBU,WAhBV8B,WAgBU,G,0BAfR9B,mBAAA,CAAa,YAAT,MAAI,sBACRA,mBAAA,CAGM,OAHN+B,WAGM,G,0BAFJ/B,mBAAA,CAAa,YAAT,MAAI,sBACRA,mBAAA,CAAmC,WAAAC,gBAAA,CAA7BC,KAAA,CAAAC,OAAO,CAAC6B,cAAc,iB,GAE9BhC,mBAAA,CAKM,OALNiC,WAKM,G,0BAJJjC,mBAAA,CAAY,YAAR,KAAG,sBACUE,KAAA,CAAAC,OAAO,CAAC+B,QAAQ,IAAIhC,KAAA,CAAAC,OAAO,CAACgC,SAAS,I,cAAtDC,YAAA,CAEYC,oBAAA;IA7CpBxC,GAAA;IA2CgED,KAAK,EAAC,WAAW;IAAE0C,MAAM;MAAAC,GAAA,EAAQrC,KAAA,CAAAC,OAAO,CAACgC,SAAS;MAAAK,GAAA,EAAOtC,KAAA,CAAAC,OAAO,CAAC+B;IAAQ;IAAIO,IAAI,EAAE;;IA3CnJC,OAAA,EAAAC,QAAA,CA4CU,MAAmF,CAAnFC,YAAA,CAAmFC,oBAAA;MAAvEC,QAAQ;QAAAP,GAAA,EAAQrC,KAAA,CAAAC,OAAO,CAACgC,SAAS;QAAAK,GAAA,EAAOtC,KAAA,CAAAC,OAAO,CAAC+B;MAAQ;;IA5C9Ea,CAAA;mCAAAnC,mBAAA,e,GA+CMZ,mBAAA,CAGM,OAHNgD,WAGM,G,0BAFJhD,mBAAA,CAAa,YAAT,MAAI,sBACRA,mBAAA,CAAoC,WAAAC,gBAAA,CAA9BC,KAAA,CAAAC,OAAO,CAAC8C,eAAe,iB,KAIjCrC,mBAAA,YAAe,EACfZ,mBAAA,CAA8C;IAArCkD,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAE7C,QAAA,CAAA8C,eAAA,IAAA9C,QAAA,CAAA8C,eAAA,IAAAD,IAAA,CAAe;KAAE,MAAI,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}