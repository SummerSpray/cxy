{"ast":null,"code":"import { BaiduMap, BmMarker } from 'vue-baidu-map-3x';\nexport default {\n  components: {\n    BaiduMap,\n    BmMarker\n  },\n  data() {\n    return {\n      village: {\n        name: '',\n        description: '',\n        image: '',\n        // 添加图片字段\n        committeeOverview: '',\n        // 村委总况介绍\n        committeeMembers: [],\n        // 村委人员介绍\n        committeeAchievements: '',\n        // 村委业绩管理\n        committeeTracking: '',\n        // 村委工作跟踪\n        statusOverview: '',\n        // 村况总况介绍\n        statusMap: '',\n        // 村况总地图\n        statusStructure: '',\n        // 村况结构管理\n        latitude: 0,\n        // 经度\n        longitude: 0 // 纬度\n      }\n    };\n  },\n  computed: {\n    villageImage() {\n      try {\n        if (this.village.image) {\n          return require(`@/assets/${this.village.image}`);\n        }\n      } catch (error) {\n        console.error('Error loading village image:', error);\n      }\n      return require('@/assets/villages/default.jpg');\n    }\n  },\n  created() {\n    const id = this.$route.params.id; // 获取路由参数 id\n    this.fetchVillage(id);\n  },\n  methods: {\n    async fetchVillage(id) {\n      try {\n        // 获取村庄基本信息\n        const villageResponse = await fetch(`http://localhost:5000/api/village/${id}`);\n        const villageData = await villageResponse.json();\n\n        // 获取村委信息\n        const committeeResponse = await fetch(`http://localhost:5000/api/village_committee/${id}`);\n        const committeeData = await committeeResponse.json();\n\n        // 获取村况信息\n        const statusResponse = await fetch(`http://localhost:5000/api/village_status/${id}`);\n        const statusData = await statusResponse.json();\n\n        // 获取地理位置信息\n        const locationResponse = await fetch(`http://localhost:5000/api/village_location/${id}`);\n        const locationData = await locationResponse.json();\n        this.village = {\n          name: villageData.name,\n          description: villageData.description,\n          image: villageData.image,\n          // 添加图片字段\n          committeeOverview: committeeData.committee_overview,\n          committeeMembers: committeeData.committeeMembers || [],\n          // 确保 committeeMembers 是一个数组\n          committeeAchievements: committeeData.committee_achievements,\n          committeeTracking: committeeData.committee_tracking,\n          statusOverview: statusData.status_overview,\n          statusMap: statusData.status_map,\n          statusStructure: statusData.status_structure,\n          latitude: locationData.latitude,\n          longitude: locationData.longitude\n        };\n      } catch (error) {\n        console.error('Error fetching village data:', error);\n      }\n    },\n    goToProductInfo() {\n      const villageId = this.$route.params.id;\n      this.$router.push({\n        name: 'ProductInfo',\n        params: {\n          id: villageId\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["BaiduMap","BmMarker","components","data","village","name","description","image","committeeOverview","committeeMembers","committeeAchievements","committeeTracking","statusOverview","statusMap","statusStructure","latitude","longitude","computed","villageImage","require","error","console","created","id","$route","params","fetchVillage","methods","villageResponse","fetch","villageData","json","committeeResponse","committeeData","statusResponse","statusData","locationResponse","locationData","committee_overview","committee_achievements","committee_tracking","status_overview","status_map","status_structure","goToProductInfo","villageId","$router","push"],"sources":["/home/toma/桌面/projects/RuralWebApp/frontend/src/views/VillageDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2>{{ village.name }}--村庄详情 </h2>\r\n    <div class=\"village-image\">\r\n      <img :src=\"villageImage\" alt=\"村庄图片\" />\r\n    </div>\r\n    <p>{{ village.description }}</p>\r\n\r\n    <!-- 村委介绍 -->\r\n    <section class=\"village-committee\">\r\n      <h3>村委介绍</h3>\r\n      <div class=\"committee-overview\">\r\n        <h4>总况介绍</h4>\r\n        <p>{{ village.committeeOverview }}</p>\r\n      </div>\r\n      <div class=\"committee-members\">\r\n        <h4>人员介绍</h4>\r\n        <ul v-if=\"village.committeeMembers.length > 0\">\r\n          <li v-for=\"member in village.committeeMembers\" :key=\"member.id\">\r\n            {{ member.name }} - {{ member.role }}\r\n          </li>\r\n        </ul>\r\n        <p v-else>暂无村委人员信息</p>\r\n      </div>\r\n      <div class=\"committee-achievements\">\r\n        <h4>业绩管理</h4>\r\n        <p>{{ village.committeeAchievements }}</p>\r\n      </div>\r\n      <div class=\"committee-tracking\">\r\n        <h4>工作跟踪</h4>\r\n        <p>{{ village.committeeTracking }}</p>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- 村况介绍 -->\r\n    <section class=\"village-status\">\r\n      <h3>村况介绍</h3>\r\n      <div class=\"status-overview\">\r\n        <h4>总况介绍</h4>\r\n        <p>{{ village.statusOverview }}</p>\r\n      </div>\r\n      <div class=\"status-map\">\r\n        <h4>总地图</h4>\r\n        <baidu-map v-if=\"village.latitude && village.longitude\" class=\"small-map\" :center=\"{lng: village.longitude, lat: village.latitude}\" :zoom=\"15\">\r\n          <bm-marker :position=\"{lng: village.longitude, lat: village.latitude}\"></bm-marker>\r\n        </baidu-map>\r\n      </div>\r\n      <div class=\"status-structure\">\r\n        <h4>结构管理</h4>\r\n        <p>{{ village.statusStructure }}</p>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- 页面底部按钮 -->\r\n    <button @click=\"goToProductInfo\">该村产品</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { BaiduMap, BmMarker } from 'vue-baidu-map-3x';\r\n\r\nexport default {\r\n  components: {\r\n    BaiduMap,\r\n    BmMarker\r\n  },\r\n  data() {\r\n    return {\r\n      village: {\r\n        name: '',\r\n        description: '',\r\n        image: '',  // 添加图片字段\r\n        committeeOverview: '',  // 村委总况介绍\r\n        committeeMembers: [],  // 村委人员介绍\r\n        committeeAchievements: '',  // 村委业绩管理\r\n        committeeTracking: '',  // 村委工作跟踪\r\n        statusOverview: '',  // 村况总况介绍\r\n        statusMap: '',  // 村况总地图\r\n        statusStructure: '',  // 村况结构管理\r\n        latitude: 0,  // 经度\r\n        longitude: 0  // 纬度\r\n      },\r\n    };\r\n  },\r\n computed: {\r\n  villageImage() {\r\n    try {\r\n      if (this.village.image) {\r\n        return require(`@/assets/${this.village.image}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading village image:', error);\r\n    }\r\n    return require('@/assets/villages/default.jpg');\r\n  }\r\n},\r\n  created() {\r\n    const id = this.$route.params.id;  // 获取路由参数 id\r\n    this.fetchVillage(id);\r\n  },\r\n  methods: {\r\n    async fetchVillage(id) {\r\n      try {\r\n        // 获取村庄基本信息\r\n        const villageResponse = await fetch(`http://localhost:5000/api/village/${id}`);\r\n        const villageData = await villageResponse.json();\r\n\r\n        // 获取村委信息\r\n        const committeeResponse = await fetch(`http://localhost:5000/api/village_committee/${id}`);\r\n        const committeeData = await committeeResponse.json();\r\n\r\n        // 获取村况信息\r\n        const statusResponse = await fetch(`http://localhost:5000/api/village_status/${id}`);\r\n        const statusData = await statusResponse.json();\r\n\r\n        // 获取地理位置信息\r\n        const locationResponse = await fetch(`http://localhost:5000/api/village_location/${id}`);\r\n        const locationData = await locationResponse.json();\r\n\r\n        this.village = {\r\n          name: villageData.name,\r\n          description: villageData.description,\r\n          image: villageData.image,  // 添加图片字段\r\n          committeeOverview: committeeData.committee_overview,\r\n          committeeMembers: committeeData.committeeMembers || [],  // 确保 committeeMembers 是一个数组\r\n          committeeAchievements: committeeData.committee_achievements,\r\n          committeeTracking: committeeData.committee_tracking,\r\n          statusOverview: statusData.status_overview,\r\n          statusMap: statusData.status_map,\r\n          statusStructure: statusData.status_structure,\r\n          latitude: locationData.latitude,\r\n          longitude: locationData.longitude,\r\n        };\r\n      } catch (error) {\r\n        console.error('Error fetching village data:', error);\r\n      }\r\n    },\r\n    goToProductInfo() {\r\n      const villageId = this.$route.params.id;\r\n      this.$router.push({ name: 'ProductInfo', params: { id: villageId } });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbody {\r\n  font-family: Arial, sans-serif;\r\n  color: #333;\r\n  background-color: #f0f0f0;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\nh2 {\r\n  font-size: 32px;\r\n  color: #2c3e50;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n\r\nsection {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  margin-bottom: 30px;\r\n  border: 1px solid #e0e0e0;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nh3 {\r\n  margin-top: 0;\r\n  margin-bottom: 15px;\r\n  color: #333;\r\n  font-size: 24px;\r\n  text-align: center;\r\n}\r\n\r\nh4 {\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n  color: #555;\r\n  font-size: 18px;\r\n}\r\n\r\nul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin-bottom: 15px;\r\n}\r\n\r\nli {\r\n  margin-bottom: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\np {\r\n  margin-bottom: 15px;\r\n  font-size: 16px;\r\n  line-height: 1.5;\r\n  color: #555;\r\n}\r\n\r\n.small-map {\r\n  width: 100%;\r\n  height: 300px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  margin-top: 15px;\r\n}\r\n\r\n.village-committee,\r\n.village-status {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.committee-overview,\r\n.committee-members,\r\n.committee-achievements,\r\n.committee-tracking,\r\n.status-overview,\r\n.status-map,\r\n.status-structure {\r\n  background-color: #f9f9f9;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  border: 1px solid #e0e0e0;\r\n}\r\n\r\n.village-image {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  \r\n}\r\n\r\n.village-image img {\r\n  max-width: 100%;\r\n  height: auto;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  width: 600px;\r\n}\r\n\r\nbutton {\r\n  margin-top: 20px;\r\n  padding: 10px 20px;\r\n  font-size: 16px;\r\n  color: #fff;\r\n  background-color: #2c3e50;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #34495e;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}